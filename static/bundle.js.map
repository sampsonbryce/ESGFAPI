{"version":3,"sources":["webpack:///webpack/bootstrap 67d5d4a30d8671bf0490","webpack:///./src/js/container.jsx"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 67d5d4a30d8671bf0490\n **/","String.prototype.capitalize = function() {\n    return this.charAt(0).toUpperCase() + this.slice(1);\n}\n\nvar Container = React.createClass({\n    getInitialState() {\n        return {'datasets': {}};\n    },\n    submit(event) {\n        console.log('submit state', this.state);\n        var filters = this.refs.filter.filters;\n        filters['query'] = this.refs.query.value;\n        if (filters['query'] === '') {\n            console.log('empty query'); //TODO: display message to user\n            return;\n        }\n        filters['results_count'] = 50;\n        var that = this;\n        $.ajax({\n            xhr: function() {\n                var options = {\n                    classname: 'my-class',\n                    id: 'my-id'\n                };\n\n                var nanobar = new Nanobar(options);\n                var xhr = new window.XMLHttpRequest();\n                xhr.upload.addEventListener(\"progress\", function(evt) {\n                    if (evt.lengthComputable) {\n                        var percentComplete = ((evt.loaded / evt.total) * 100) / 2;\n                        nanobar.go(percentComplete);\n                    }\n                }, false);\n                xhr.addEventListener(\"progress\", function(evt) {\n                    if (evt.lengthComputable) {\n                        var percentComplete = (((evt.loaded / evt.total) * 100) / 2) + 50;\n                        nanobar.go(percentComplete);\n                    }\n                }, false);\n                return xhr;\n            },\n\n            url: 'http://localhost:5000/search', //TODO: Remove this\n            data: JSON.stringify(filters),\n            type: 'POST',\n            contentType: 'application/json;charset=UTF-8',\n            success: function(response) {\n                console.log('checking state', that.state);\n                console.log('response', response);\n                var tempstate = that.state;\n                tempstate['constraints'] = response['constraints'];\n                delete response['constraints'];\n                tempstate['datasets'] = response;\n                that.setState(tempstate);\n            },\n            error: function(response) {\n                console.log('fail');\n            }\n        });\n    },\n    checkEnter(event) {\n        if (event.keyCode === 13) {\n            this.submit(event);\n        }\n    },\n    render() {\n\n        console.log('render state', this.state);\n        return (\n            <div onKeyUp={this.checkEnter}>\n                <h3 style={{\n                    'display': \"inline-block\"\n                }}>Query</h3>\n                <input className=\"search-bar\" ref='query'></input>\n                <Filter ref='filter' onKeyUp={this.checkEnter}></Filter>\n                <button onClick={this.submit}>Submit</button>\n                <ResultsContainer results={this.state.datasets}/>\n            </div>\n        );\n    }\n});\n\nvar Filter = React.createClass({\n    getInitialState() {\n        this.filters = {};\n        return {\n            'filters': [],\n            'possible_filters': ['Select a filter...', 'project', 'model', 'realm', 'ensemble']\n        }; //TODO: get possible from esgf api\n    },\n    handleChange(key, event) {\n        this.filters[key] = event.target.value;\n    },\n\n    removePossibleFilter(event) {\n        let state = this.state;\n        delete state.possible_filters[state.possible_filters.indexOf(event.target.value)];\n        this.state.filters.push(event.target.value);\n        this.setState(state);\n        console.log(this.state);\n    },\n\n    render() {\n        var filters = []\n\n        console.log('in render adding filters', this.state.filters);\n        for (var i = 0; i < this.state.filters.length; i++) {\n            console.log('adding filter');\n            let name = 'filter' + i;\n            filters.push(\n                <div key={i}>\n                    <h3 key={i} style={{\n                        'display': 'inline-block'\n                    }}>{this.state.filters[i].capitalize()}</h3>\n                    <input className=\"filter-bar\" key={i} ref={name} onChange={this.handleChange.bind(this, this.state.filters[i])}></input>\n                </div>\n            );\n        }\n\n        return (\n            <div>\n                {filters}\n                <select onChange={this.removePossibleFilter} className=\"filter-dropdown\" ref='dropdown'>\n                    {this.state.possible_filters.map((value, index) => {\n                        return (\n                            <option key={index} value={value}>{value}</option>\n                        )\n                    })}\n                </select>\n            </div>\n        )\n    }\n});\n\nvar ResultsContainer = React.createClass({\n    render() {\n        console.log('resutls', this.props.results);\n        return (\n            <ul style={{\n                'listStyle': 'none'\n            }}>\n                {Object.keys(this.props.results).map((result, i) => {\n                    return (\n                        <Result key={i} obj={this.props.results[result]}></Result>\n                    )\n                })}\n            </ul>\n        )\n    }\n})\n\nvar Result = React.createClass({\n    render() {\n        return (\n            <li>{this.props.obj.title}</li>\n        )\n    }\n})\nReactDOM.render(\n    <Container/>, document.getElementById('search-container'));\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/container.jsx\n **/"],"sourceRoot":""}